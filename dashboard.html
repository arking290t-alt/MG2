<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MG Dashboard</title>

<style>
body{
  margin:0;
  font-family:Poppins, sans-serif;
  background:radial-gradient(circle at top left,#0b111b,#06090f);
  color:white;
}

/* HEADER */
header{
  padding:20px 30px;
  font-size:26px;
  font-weight:700;
  color:#00b4ff;
}

/* MAIN */
.main{
  padding:40px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}

.card{
  background:rgba(255,255,255,0.05);
  padding:30px;
  border-radius:16px;
  text-align:center;
  cursor:pointer;
  transition:.3s;
}
.card:hover{
  background:rgba(0,180,255,0.12);
  transform:translateY(-5px);
}
.card h3{
  color:#00b4ff;
  margin-bottom:10px;
}

/* AI BUTTON */
#ai-toggle{
  position:fixed;
  bottom:25px;
  right:25px;
  width:60px;
  height:60px;
  border-radius:50%;
  border:none;
  background:#00b4ff;
  font-size:26px;
  cursor:pointer;
  z-index:9999;
  box-shadow:0 0 25px rgba(0,180,255,.7);
}

/* AI CHAT */
#ai-box{
  position:fixed;
  bottom:100px;
  right:25px;
  width:320px;
  height:420px;
  background:#0f1724;
  border-radius:16px;
  display:none;
  flex-direction:column;
  overflow:hidden;
  z-index:9999;
  box-shadow:0 0 30px rgba(0,180,255,.6);
}

#ai-header{
  background:#00b4ff;
  color:#001;
  padding:10px;
  text-align:center;
  font-weight:700;
}

#ai-messages{
  flex:1;
  padding:10px;
  overflow-y:auto;
  font-size:14px;
}

#ai-input-area{
  display:flex;
  border-top:1px solid rgba(255,255,255,.1);
}
#ai-input{
  flex:1;
  background:none;
  border:none;
  padding:10px;
  color:white;
  outline:none;
}
#ai-send{
  background:#00b4ff;
  border:none;
  padding:10px 14px;
  cursor:pointer;
}
</style>
</head>

<body>

<header>MG Dashboard</header>

<div class="main">
  <div class="card" onclick="location.href='inventory.html'">
    <h3>Inventory</h3>
    <p>Manage stock & materials</p>
  </div>

  <div class="card" onclick="location.href='jobs.html'">
    <h3>Jobs</h3>
    <p>Track production jobs</p>
  </div>

  <div class="card" onclick="location.href='staff.html'">
    <h3>Staff</h3>
    <p>Employees & attendance</p>
  </div>

  <div class="card" onclick="location.href='expenses.html'">
    <h3>Expenses</h3>
    <p>Company spending</p>
  </div>
</div>

<!-- AI -->
<button id="ai-toggle">ðŸ¤–</button>

<div id="ai-box">
  <div id="ai-header">MG AI Assistant</div>
  <div id="ai-messages"></div>

  <div id="ai-input-area">
    <input id="ai-input" placeholder="Ask anything..." />
    <button id="ai-send">âž¤</button>
  </div>
</div>

<script>
const AI_URL = "https://ai-backend.arking290t.workers.dev/";

const toggle = document.getElementById("ai-toggle");
const box = document.getElementById("ai-box");
const sendBtn = document.getElementById("ai-send");
const input = document.getElementById("ai-input");
const messages = document.getElementById("ai-messages");

toggle.onclick = () => {
  box.style.display = box.style.display === "flex" ? "none" : "flex";
};

sendBtn.onclick = sendMessage;
input.addEventListener("keydown", e => e.key==="Enter" && sendMessage());

async function sendMessage(){
  const msg = input.value.trim();
  if(!msg) return;

  messages.innerHTML += `<div style="color:#9fb6d4"><b>You:</b> ${msg}</div>`;
  input.value = "";

  try{
    const res = await fetch(AI_URL,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ message: msg })
    });

    const data = await res.json();
    messages.innerHTML += `<div style="color:#00b4ff;margin-bottom:10px"><b>AI:</b> ${data.reply}</div>`;
    messages.scrollTop = messages.scrollHeight;

  }catch(e){
    messages.innerHTML += `<div style="color:red">AI error</div>`;
  }
}
</script>

</body>
</html>
